<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC
        "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="mini.shoppingb.mapper.GoodsMapper">

    <insert id="goodsRegist" parameterType="goods">
        insert into goods
            (goods_Num , goods_name , goods_price ,goods_contents , emp_num
            ,GOODS_REGIST , GOODS_MAIN_IMAGE ,GOODS_MAIN_STORE_IMAGE
            , GOODS_DETAIL_IMAGE ,GOODS_DETAIL_STORE_IMAGE
            , visit_count ,update_Emp_Num , goods_Update_Date)
        values
            (#{goodsNum}, #{goodsName}, #{goodsPrice}, #{goodsContents}
            ,#{empNum}, sysdate(),
            #{goodsMainImage}, #{goodsMainStoreImage},
            <if test="goodsDetailImage != null">
                #{goodsDetailImage},#{goodsDetailStoreImage},
            </if>
            <if test="goodsDetailImage == null">
                null,null,
            </if>
            0,null,null)
    </insert>

    <select id="goodsList" resultType="goods">
        select goods_Num , goods_name , goods_price ,goods_contents , emp_num
                         ,GOODS_REGIST , GOODS_MAIN_IMAGE ,GOODS_MAIN_STORE_IMAGE
                         , GOODS_DETAIL_IMAGE ,GOODS_DETAIL_STORE_IMAGE
                         , visit_count ,update_Emp_Num , goods_Update_Date from goods
    </select>

    <select id="goodsDetail" parameterType="integer" resultType="goods">
        select goods_Num , goods_name , goods_price ,goods_contents , emp_num
             ,GOODS_REGIST , GOODS_MAIN_IMAGE ,GOODS_MAIN_STORE_IMAGE
             , GOODS_DETAIL_IMAGE ,GOODS_DETAIL_STORE_IMAGE
             , visit_count ,update_Emp_Num , goods_Update_Date from goods where goods_num=#{goodsNum}
    </select>

    <update id="goodsUpdate" parameterType="goods">
        update goods set goods_name=#{goodsName} , goods_price=#{goodsPrice} ,goods_contents=#{goodsContents} , emp_num=#{empNum}
                       ,GOODS_REGIST=#{goodsRegist} , GOODS_MAIN_IMAGE=#{goodsMainImage} ,GOODS_MAIN_STORE_IMAGE=#{goodsMainStoreImage}
                       , GOODS_DETAIL_IMAGE=#{goodsDetailImage} ,GOODS_DETAIL_STORE_IMAGE=#{goodsDetailStoreImage}
                       , visit_count=#{visitCount} ,update_Emp_Num=#{updateEmpNum} , goods_Update_Date=sysdate()
        where goods_Num=#{goodsNum}
    </update>

</mapper>